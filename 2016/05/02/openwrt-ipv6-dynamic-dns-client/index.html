<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-eval' 'unsafe-inline' data: https:; img-src 'self' data: https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https:; object-src 'self'"/><meta name="viewport" content="width=device-width,initial-scale=1"><title>OpenWRT IPv6 Dynamic DNS Client</title><meta name="msvalidate.01" content="009F12474AB330989749B979B5868A7F"/><meta name="google-site-verification" content="in8GfCIv-CYlwD5AxO0jVMlrUy1s42a_-cxlOWdv4U0"/><meta name="yandex-verification" content="c29e9c1084b24e1d"/><meta name="description" content="This should be rather straightforward but I encountered problems setting up with a solution worth sharing and I will throw in a tip that you may find useful."/><meta name="author" content="Leow Kah Man"/><link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192"/><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link rel="canonical" href="https://www.leowkahman.com/2016/05/02/openwrt-ipv6-dynamic-dns-client/"><link href="" rel="alternate" type="application/rss+xml" title="Leow Kah Man - Tech Blog"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous"/><link rel="stylesheet" href="/css/custom.css?v=1.0.0"/><style id="antiClickjack">body{display:none!important}</style><script>if(self===top){var antiClickjack=document.getElementById("antiClickjack");antiClickjack.parentNode.removeChild(antiClickjack)}else top.location=self.location</script><script>function redirectToCorrectDomainIfRequired(){for(var o=["www.leowkahman.com","localhost"],e=0;e<o.length;e++)if(window.location.hostname==o[e])return;window.location="https://www.leowkahman.com"+window.location.pathname}redirectToCorrectDomainIfRequired()</script></head><body><nav class="navbar navbar-default navbar-static-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">Leow Kah Man - Tech Blog</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"></ul><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li></ul></div></div></nav><div class="container"><div class="row"><div class="col-sm-12"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8585963436723502" data-ad-slot="7600784826" data-ad-format="auto"></ins></div></div><div class="row"><div class="col-sm-8 blog-main"><div class="row"><div class="blog-main blog-post"><h1 class="blog-post-title">OpenWRT IPv6 Dynamic DNS Client</h1><p class="blog-post-meta"><i class="fa fa-calendar"></i> Published: 2 May 2016 &nbsp;|&nbsp; <i class="fa fa-folder"></i> <a href="https://www.leowkahman.com/categories/network">Network</a></p><ul class="list-inline share" style="margin-top:15px;margin-left:0"><li class="facebook-share"><a target="_blank" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.leowkahman.com%2f2016%2f05%2f02%2fopenwrt-ipv6-dynamic-dns-client%2f"><i class="fa fa-facebook fa-lg"></i> Facebook</a></li><li class="googleplus-share"><a target="_blank" href="https://plus.google.com/share?url=https%3a%2f%2fwww.leowkahman.com%2f2016%2f05%2f02%2fopenwrt-ipv6-dynamic-dns-client%2f"><i class="fa fa-google-plus fa-lg"></i> Google+</a></li><li class="twitter-share"><a target="_blank" href="https://twitter.com/share?url=https%3a%2f%2fwww.leowkahman.com%2f2016%2f05%2f02%2fopenwrt-ipv6-dynamic-dns-client%2f&amp;text=OpenWRT%20IPv6%20Dynamic%20DNS%20Client"><i class="fa fa-twitter fa-lg"></i> Twitter</a></li><li class="reddit-share"><a target="_blank" href="http://reddit.com/submit?url=https%3a%2f%2fwww.leowkahman.com%2f2016%2f05%2f02%2fopenwrt-ipv6-dynamic-dns-client%2f&amp;title=OpenWRT%20IPv6%20Dynamic%20DNS%20Client"><i class="fa fa-reddit fa-lg"></i> Reddit</a></li><li class="linkedin-share"><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.leowkahman.com%2f2016%2f05%2f02%2fopenwrt-ipv6-dynamic-dns-client%2f"><i class="fa fa-linkedin fa-lg"></i> LinkedIn</a></li></ul><p>This should be rather straightforward but I encountered problems setting up with a solution worth sharing and I will throw in a tip that you may find useful.</p><p></p><h2 id="ipv6-adoption">IPv6 adoption</h2><p>You may postpone the adoption of it but time will come when this becomes a must. Previously, I disabled it out of security concerns because every device with an IPv6 is directly routable. In my humble opinion, the implicit security of IPv4&rsquo;s <a href="https://en.wikipedia.org/wiki/Network_address_translation">Network Address Translation (NAT)</a> has made many too lax about network security, myself included.</p><p>When I was new to IPv6, I immediately rolled back the activation of it on the router as soon as I discovered NAT was not there because my LAN computers became directly routable. Subsequently, I needed to configure the firewall adequately before reactivating.</p><h2 id="finding-ipv6-dynamic-dns-provider">Finding IPv6 Dynamic DNS provider</h2><p>Firstly, I needed to find a Dynamic DNS (DDNS) provider that has IPv6 support. I tested a few by attempting to find API documentation on how to update the IPv6 field but most providers do not seem to offer API for IPv6. I also tested using HTTP GET in web browser as well as using <code>curl</code> on OpenWRT until I found one that works, <a href="https://www.dynu.com">Dynu</a> with <code>ddns 2.4.3-2</code> (from OpenWRT repository).</p><p>Dynu&rsquo;s API is simple as with most DDNS providers:</p><p><code>http://api.dynu.com/nic/update?hostname=[DOMAIN]&amp;amp;myip=[IP]&amp;amp;myipv6=10.0.0.0&amp;amp;username=[USERNAME]&amp;amp;password=[PASSWORD]</code></p><p>As you can see in the URL above, I have specified <code>myip</code> as [IP] and <code>myipv6</code> parameter as 10.0.0.0 intentionally which I will explain in the next section. The password field must be hashed with <a href="https://www.google.com/search?q=md5+hash+generator">MD5</a>.</p><h2 id="full-configuration">Full configuration</h2><p>Create an account at Dynu and setup a dynamic domain of your choice.</p><p>Add a new DDNS configuration with the following settings:</p><pre><code class="language-text">config service 'dynu'
option enabled '1'
    option domain 'domain'
    option username 'username'
    option use_https '1'
    option cacert '/etc/ssl/certs'
    option use_logfile '0'
    option check_interval '24'
    option check_unit 'hours'
    option force_unit 'days'
    option update_url 'http://api.dynu.com/nic/update?hostname=[DOMAIN]&amp;myip=[IP]&amp;myipv6=10.0.0.0&amp;username=[USERNAME]&amp;password=[PASSWORD]'
    option password 'md5(password)'
    option force_interval '2'
    option ip_source 'network'
    option interface 'wan'
    option ip_network 'wan'
    option use_syslog '2'
</code></pre><ol><li>Alter the <strong>domain</strong>, <strong>username</strong> and <strong>md5(password)</strong> accordingly.</li><li>My configuration is set to use HTTPS which requires <code>ca-certificates</code> and the full <code>wget</code> packages to be installed. If you do not have enough free space on your router, you may have to do without HTTPS unfortunately.</li><li>According to <a href="https://www.dynu.com/DynamicDNS/IP-Update-Protocol">Dynu&rsquo;s API documentation</a>, 10.0.0.0 is a special IP address that will be substituted with request source IP. I have placed this in the myipv6 field.</li></ol><h2 id="faq">FAQ</h2><h3 id="why-did-i-put-the-special-ip-address-10-0-0-0-on-myipv6-instead-of-myip-field">Why did I put the special IP address 10.0.0.0 on myipv6 instead of myip field</h3><p>If you have dual stack IPv4 and IPv6 on your network, the latter will always be used first. As such, When this happens, Dynu can only tell your IPv6 address, not the IPv4 which you must therefore pass this parameter.</p><h3 id="is-it-possible-to-make-two-separate-configuration-one-for-ipv4-and-one-for-ipv6">Is it possible to make two separate configuration; one for IPv4 and one for IPv6</h3><p>Yes but I wanted to minimise the number of calls to Dynu&rsquo;s API.</p><h3 id="how-do-i-get-the-md5-hash-of-my-password">How do I get the MD5 hash of my password</h3><p>Look for MD5 hash generator on search engines.</p><ul class="list-inline tags" style="margin-left:0"><li class="btn btn-primary"><a href="https://www.leowkahman.com/tags/dns">DNS</a></li><li class="btn btn-primary"><a href="https://www.leowkahman.com/tags/openwrt">OpenWRT</a></li></ul></div></div><div class="row"><h4>Support Me</h4><p>If this post helped you, would you buy me a cup of tea/coffee?</p><a href="https://www.paypal.me/leowkahman/12"><i class="fa fa-3x fa-cc-paypal"></i> </a>&nbsp;&nbsp; <a href="#btc" onclick='return document.getElementById("btc").style.display="block",!1'><i class="fa fa-3x fa-btc"></i> </a><span id="btc" style="display:none"><a href="bitcoin:14vH7vDj7eyvvc7mxCkrgTx2HUntpeKhAn?amount=0.001&amp;label=Tech%20Blog"><img src="/images/bitcoin.png"> 14vH7vDj7eyvvc7mxCkrgTx2HUntpeKhAn</a></span></div><div class="blog-post"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8585963436723502" data-ad-slot="8937917223" data-ad-format="auto"></ins></div><div class="row"><div id="disqus_thread"></div><script>!function(){if("localhost"!=window.location.hostname){var e=document.createElement("script");e.type="text/javascript",e.async=!0;e.src="https://leowkahman.disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}}()</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div><div class="col-sm-4 blog-sidebar"><div class="sidebar-module"><script>!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx=partner-pub-8585963436723502:5716828028";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><gcse:search></gcse:search></div><div class="sidebar-module"><h4>Recent Posts</h4><ul class="list-unstyled posts-recent"><li><a href="https://www.leowkahman.com/2017/09/23/checklist-for-switching-from-windows-to-linux/">Checklist for switching from Windows to Linux</a></li><li><a href="https://www.leowkahman.com/2017/09/11/enforce-safe-search-on-google-youtube-bing/">Enforce Safe Search on Google, YouTube, Bing</a></li><li><a href="https://www.leowkahman.com/2017/09/10/gitlab-ci-remove-priority-zero-from-hugo-sitemap/">GitLab CI remove priority zero from Hugo sitemap</a></li><li><a href="https://www.leowkahman.com/2017/09/09/gitlab-ci-push-output-to-github/">GitLab CI push output to GitHub</a></li><li><a href="https://www.leowkahman.com/2017/09/05/tm-streamyx-router-wifi-security/">TM Streamyx Router Wi-Fi Security</a></li></ul></div><div class="sidebar-module"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8585963436723502" data-ad-slot="6069940020" data-ad-format="auto"></ins></div><div class="sidebar-module"><h4>Categories</h4><ul class="list-unstyled posts-recent"><li><a href="https://www.leowkahman.com/categories/web/">web</a></li><li><a href="https://www.leowkahman.com/categories/network/">network</a></li><li><a href="https://www.leowkahman.com/categories/software/">software</a></li><li><a href="https://www.leowkahman.com/categories/hardware/">hardware</a></li><li><a href="https://www.leowkahman.com/categories/cloud/">cloud</a></li></ul></div></div></div></div><footer class="blog-footer"><div class="container"><div class="row"><div class="col-sm-8 col-xs-6"><ul class="list-inline links"><li><a href="https://status.leowkahman.com/">Uptime</a></li></ul></div><div class="col-sm-4 col-xs-6"><ul class="list-inline"><li><a target="_blank" href="/index.xml"><i class="fa fa-rss fa-lg"></i></a></li><li><a target="_blank" href="https://stackexchange.com/users/6729082/leow-kah-man"><i class="fa fa-stack-exchange fa-lg"></i></a></li><li><a target="_blank" href="https://github.com/kmleow"><i class="fa fa-github fa-lg"></i></a></li><li><a target="_blank" href="https://www.linkedin.com/in/kmleow"><i class="fa fa-linkedin fa-lg"></i></a></li><li><a target="_blank" href="https://www.facebook.com/LeowKahMan"><i class="fa fa-facebook fa-lg"></i></a></li></ul></div></div></div><div class="container"><div class="col-sm-12 row"><p>Except as otherwise noted, the content of this page is licensed under the <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>,<br/>code samples are licensed under the <a href="https://tldrlegal.com/license/mit-license">MIT License</a>.</p></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha256-Daf8GuI2eLKHJlOWLRR/zRy9Clqcj4TUSumbxYH9kGI=" crossorigin="anonymous"></script><script src="/js/custom.js?v=1.0.1"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>[].forEach.call(document.querySelectorAll(".adsbygoogle"),function(){(adsbygoogle=window.adsbygoogle||[]).push({})})</script><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-61838818-1","auto"),ga("send","pageview"),ga("set","forceSSL",!0)</script></body></html>