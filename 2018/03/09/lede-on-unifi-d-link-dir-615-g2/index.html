<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-eval' 'unsafe-inline' data: https:; img-src 'self' data: https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https:; object-src 'self'"/><meta name="viewport" content="width=device-width,initial-scale=1"><title>LEDE on UniFi D-Link DIR-615 G2</title><meta name="msvalidate.01" content="009F12474AB330989749B979B5868A7F"/><meta name="google-site-verification" content="in8GfCIv-CYlwD5AxO0jVMlrUy1s42a_-cxlOWdv4U0"/><meta name="yandex-verification" content="c29e9c1084b24e1d"/><meta name="description" content="Flashing Wi-Fi router supplied by TM UniFi with LEDE OpenWRT with VLAN IPTV switch settings configured."/><meta name="author" content="Leow Kah Man"/><link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192"/><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link rel="canonical" href="https://www.leowkahman.com/2018/03/09/lede-on-unifi-d-link-dir-615-g2/"><link href="" rel="alternate" type="application/rss+xml" title="Leow Kah Man - Tech Blog"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous"/><link rel="stylesheet" href="/css/custom.css?v=1.0.0"/><style id="antiClickjack">body{display:none!important}</style><script>if(self===top){var antiClickjack=document.getElementById("antiClickjack");antiClickjack.parentNode.removeChild(antiClickjack)}else top.location=self.location</script><script>function redirectToCorrectDomainIfRequired(){for(var o=["www.leowkahman.com","localhost"],e=0;e<o.length;e++)if(window.location.hostname==o[e])return;window.location="https://www.leowkahman.com"+window.location.pathname}redirectToCorrectDomainIfRequired()</script></head><body><nav class="navbar navbar-default navbar-static-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">Leow Kah Man - Tech Blog</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"></ul><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li></ul></div></div></nav><div class="container"><div class="row"><div class="col-sm-12"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8585963436723502" data-ad-slot="7600784826" data-ad-format="auto"></ins></div></div><div class="row"><div class="col-sm-8 blog-main"><div class="row"><div class="blog-main blog-post"><h1 class="blog-post-title">LEDE on UniFi D-Link DIR-615 G2</h1><p class="blog-post-meta"><i class="fa fa-calendar"></i> Published: 9 March 2018 &nbsp;|&nbsp; <i class="fa fa-calendar-check-o"></i> Last updated: 12 March 2018 &nbsp;|&nbsp; <i class="fa fa-folder"></i> <a href="https://www.leowkahman.com/categories/hardware">Hardware</a></p><ul class="list-inline share" style="margin-top:15px;margin-left:0"><li class="facebook-share"><a target="_blank" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f09%2flede-on-unifi-d-link-dir-615-g2%2f"><i class="fa fa-facebook fa-lg"></i> Facebook</a></li><li class="googleplus-share"><a target="_blank" href="https://plus.google.com/share?url=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f09%2flede-on-unifi-d-link-dir-615-g2%2f"><i class="fa fa-google-plus fa-lg"></i> Google+</a></li><li class="twitter-share"><a target="_blank" href="https://twitter.com/share?url=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f09%2flede-on-unifi-d-link-dir-615-g2%2f&amp;text=LEDE%20on%20UniFi%20D-Link%20DIR-615%20G2"><i class="fa fa-twitter fa-lg"></i> Twitter</a></li><li class="reddit-share"><a target="_blank" href="http://reddit.com/submit?url=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f09%2flede-on-unifi-d-link-dir-615-g2%2f&amp;title=LEDE%20on%20UniFi%20D-Link%20DIR-615%20G2"><i class="fa fa-reddit fa-lg"></i> Reddit</a></li><li class="linkedin-share"><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f09%2flede-on-unifi-d-link-dir-615-g2%2f"><i class="fa fa-linkedin fa-lg"></i> LinkedIn</a></li></ul><p><a href="/images/2018/03/d-link-dir-615-g2-front.jpg"><img src="/images/2018/03/d-link-dir-615-g2-front.jpg" alt="D-Link DIR-615 G2 - Front"/></a></p><p>My ISP provided D-Link DIR-615 G2 many years ago. Could not even remember how long ago that was. After using for a short period of time, it was chucked away until I found it yesterday while cleaning up my store room. I decided to flash it with LEDE (also known as OpenWRT) to see how it goes.</p><p></p><h2 id="motivation">Motivation</h2><p>I am not a fan of manufacturer supplied firmware for Wi-Fi routers. I can say a long list of things I hate but I am not going to talk about it on this post. This unit has been left unused for many years, almost forgotten. Since I have no use for it, there is nothing to lose (in case I bricked it while flashing with 3rd party firmware).</p><h2 id="known-attempts">Known attempts</h2><p><a href="https://klseet.com/209-openwrt/openwrt-d-link/dir-615-g1/205-dir-615-g1-flash">K.L.Seet has demonstrated that flashing this model with OpenWRT Altitude Adjustment</a> works. Several others have blogged about their success with <a href="https://unifidr.blogspot.my/2015/01/how-to-flash-and-configure-your-tm-unifi-dir615-dlink-to-dd-wrt-firmware.html">DD-WRT on this model</a> too but I prefer OpenWRT/LEDE for its package availability.</p><p>To my best knowledge, nobody has tried flashing LEDE 17.01.4 onto it. Maybe this model is too old to even be bothered with.</p><h2 id="download-lede-firmware">Download LEDE firmware</h2><p>LEDE/OpenWRT image for hardware version G2 cannot be found. As pointed out by others, version D&rsquo;s firmware is compatible.</p><p>I have flashed my router over and over at least half a dozen times doing this experiment. I tried DIR-620 A1 image too but found that it does not work properly on version G2 supplied by TM UniFi. It can boot. LEDE shows that there is slightly over 4MB free space on the flash. However, whatever I install does not persist past reboot. System logs were showing errors relating to <code>jffs2</code>.</p><p>Therefore, I recommend sticking to DIR-615 D firmware. The LEDE image to use is <a href="https://downloads.lede-project.org/releases/17.01.4/targets/ramips/rt305x/lede-17.01.4-ramips-rt305x-dir-615-d-squashfs-factory.bin"><code>dir-615-d-squashfs-factory.bin</code></a>.</p><h2 id="flashing-via-web-based-recovery-mode">Flashing via web-based recovery mode</h2><p>Please note that while I have tried this and found this to be workiing for me, it may not be for you. If you are afraid of bricking then do not proceed. If you do proceed, proceed at your own risk.</p><p>Instructions:</p><ol><li>Power off the router.</li><li>Use a paper clip to poke the reset button and hold it there while powering on the router until the power LED starts blinking in amber.</li><li>Configure your computer&rsquo;s IP address to a static one of <code>192.168.0.2</code>. The router&rsquo;s DHCP is not active during recovery mode hence the need to set static IP.</li><li>Access <code>http://192.168.0.1/</code>. You should be seeing a firmware upload page. Upload and wait for at least 3 minutes. When all LED lights are off, power cycle the unit.</li><li>Remove the static IP setting you have set for the computer. In another minute, it should be possible to access LEDE via <code>http://192.168.1.1/</code>.</li></ol><h2 id="lede-first-run">LEDE first run</h2><p>LEDE status page:</p><p><a href="/images/2018/03/d-link-dir-615-g2-lede.png"><img src="/images/2018/03/d-link-dir-615-g2-lede.png" alt="D-Link DIR-615 G2 - LEDE"/></a></p><h2 id="configuring-vlan-for-tm-unifi-malaysia">Configuring VLAN for TM UniFi Malaysia</h2><p>Before you begin copying the VLAN switch details below, I just want to mention that the sequence of LAN ports for this model on LEDE are in reverse. i.e. Port 1 in switch settings is actually Port 4 physically, likewise Port 2 is actually 3.</p><p>Given that the router was originally supplied with Port 4 physically marked in red to indicate that it is for IPTV use, we should therefore be configuring Port 1 in switch settings for this purpose.</p><p><a href="/images/2018/03/d-link-dir-615-g2-back.jpg"><img src="/images/2018/03/d-link-dir-615-g2-back.jpg" alt="D-Link DIR-615 G2 - Back"/></a></p><p>VLAN switch settings:</p><p><a href="/images/2018/03/d-link-dir-615-g2-switch-unifi.png"><img src="/images/2018/03/d-link-dir-615-g2-switch-unifi.png" alt="D-Link DIR-615 G2 - Switch for UniFi"/></a></p><h2 id="known-limitations">Known limitations</h2><p>I knew upfront that recent versions of LEDE require more space than it did many years ago. This is expected given that packages grow. On this router with 4MB flash memory, you can expect just 300KB of free space to install packages. That is sufficient only for Dynamic DNS scripts (<code>ddns-scripts</code>) and its Web GUI (<code>luci-app-ddns</code>).</p><p>I tried loading USB packages required to extend the storage space through USB flash drive but it does not seem to work. Neither the OHCI, UHCI, nor USB2 drivers work for this model. If you found a way around this, kindly share a comment below.</p><ul class="list-inline tags" style="margin-left:0"><li class="btn btn-primary"><a href="https://www.leowkahman.com/tags/lede">lede</a></li><li class="btn btn-primary"><a href="https://www.leowkahman.com/tags/openwrt">openwrt</a></li></ul></div></div><div class="blog-post"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8585963436723502" data-ad-slot="8937917223" data-ad-format="auto"></ins></div><div class="row"><div id="disqus_thread"></div><script>!function(){if("localhost"!=window.location.hostname){var e=document.createElement("script");e.type="text/javascript",e.async=!0;e.src="https://leowkahman.disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}}()</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div><div class="col-sm-4 blog-sidebar"><div class="sidebar-module"><script>!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx=partner-pub-8585963436723502:5716828028";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><gcse:search></gcse:search></div><div class="sidebar-module"><h4>Recent Posts</h4><ul class="list-unstyled posts-recent"><li><a href="https://www.leowkahman.com/2018/03/09/lede-on-unifi-d-link-dir-615-g2/">LEDE on UniFi D-Link DIR-615 G2</a></li><li><a href="https://www.leowkahman.com/2018/02/10/backup-disk-by-cloning-using-clonezilla/">Backup disk by cloning using Clonezilla</a></li><li><a href="https://www.leowkahman.com/2018/01/12/exclude-adsense-ads-from-specific-posts-on-hugo/">Exclude Adsense ads from specific posts on Hugo</a></li><li><a href="https://www.leowkahman.com/2018/01/09/setup-nodejs-with-apache-proxypass-on-raspberry-pi/">Setup NodeJS with Apache ProxyPass on Raspberry Pi</a></li><li><a href="https://www.leowkahman.com/2018/01/02/workaround-to-failure-to-download-extra-files-ttf-mscorefonts-installer/">Workaround to Failure to download extra files ttf-mscorefonts-installer</a></li></ul></div><div class="sidebar-module"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8585963436723502" data-ad-slot="6069940020" data-ad-format="auto"></ins></div><div class="sidebar-module"><h4>Categories</h4><ul class="list-unstyled posts-recent"><li><a href="https://www.leowkahman.com/categories/web/">web</a></li><li><a href="https://www.leowkahman.com/categories/network/">network</a></li><li><a href="https://www.leowkahman.com/categories/software/">software</a></li><li><a href="https://www.leowkahman.com/categories/hardware/">hardware</a></li><li><a href="https://www.leowkahman.com/categories/cloud/">cloud</a></li></ul></div><div class="sidebar-module"><div id="amzn-assoc-ad-2cb50066-d10a-485e-9416-70d5db8469a8"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=2cb50066-d10a-485e-9416-70d5db8469a8"></script></div></div></div></div><footer class="blog-footer"><div class="container"><div class="row"><div class="col-sm-8 col-xs-6"><ul class="list-inline links"><li><a href="https://status.leowkahman.com/">Uptime</a></li></ul></div><div class="col-sm-4 col-xs-6"><ul class="list-inline"><li><a target="_blank" href="/index.xml"><i class="fa fa-rss fa-lg"></i></a></li><li><a target="_blank" href="https://stackexchange.com/users/6729082/leow-kah-man"><i class="fa fa-stack-exchange fa-lg"></i></a></li><li><a target="_blank" href="https://github.com/kmleow"><i class="fa fa-github fa-lg"></i></a></li><li><a target="_blank" href="https://www.linkedin.com/in/kmleow"><i class="fa fa-linkedin fa-lg"></i></a></li><li><a target="_blank" href="https://www.facebook.com/LeowKahMan"><i class="fa fa-facebook fa-lg"></i></a></li></ul></div></div></div><div class="container"><div class="col-sm-12 row"><p>Except as otherwise noted, the content of this page is licensed under the <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>,<br/>code samples are licensed under the <a href="https://tldrlegal.com/license/mit-license">MIT License</a>.</p></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha256-Daf8GuI2eLKHJlOWLRR/zRy9Clqcj4TUSumbxYH9kGI=" crossorigin="anonymous"></script><script src="/js/custom.js?v=1.0.1"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>[].forEach.call(document.querySelectorAll(".adsbygoogle"),function(){(adsbygoogle=window.adsbygoogle||[]).push({})})</script><script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-61838818-1","auto"),ga("send","pageview"),ga("set","forceSSL",!0)</script></body></html>