<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Using Raspbian on 2GB Micro SD Card</title><meta name="msvalidate.01" content="009F12474AB330989749B979B5868A7F"/><meta name="google-site-verification" content="in8GfCIv-CYlwD5AxO0jVMlrUy1s42a_-cxlOWdv4U0"/><meta name="yandex-verification" content="c29e9c1084b24e1d"/><meta name="description" content="Using Raspbian Stretch on 2GB Micro SD Card, what I have installed, and how much free space left."/><meta name="author" content="Leow Kah Man"/><link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192"/><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link rel="canonical" href="https://www.leowkahman.com/2018/03/13/using-raspbian-on-2gb-micro-sd-card/"><link href="" rel="alternate" type="application/rss+xml" title="Leow Kah Man - Tech Blog"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/vs.min.css" integrity="sha256-iGs2TpBtdfGr1FIgzGyO4CKAD1+2QaDswtMmJwDtHAs=" crossorigin="anonymous"/><link rel="stylesheet" href="/css/custom.css?v=1.0.0"/><style id="antiClickjack">body{display:none!important}</style><script>if(self===top){var antiClickjack=document.getElementById("antiClickjack");antiClickjack.parentNode.removeChild(antiClickjack)}else top.location=self.location</script><script>function redirectToCorrectDomainIfRequired(){for(var o=["www.leowkahman.com","localhost"],e=0;e<o.length;e++)if(window.location.hostname==o[e])return;window.location="https://www.leowkahman.com"+window.location.pathname}redirectToCorrectDomainIfRequired()</script></head><body><nav class="navbar navbar-default navbar-static-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">Leow Kah Man - Tech Blog</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"></ul><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li></ul></div></div></nav><div class="container"><div class="row"><div class="col-sm-8 blog-main"><div class="row"><div class="blog-main blog-post"><h1 class="blog-post-title">Using Raspbian on 2GB Micro SD Card</h1><p class="blog-post-meta"><i class="fa fa-calendar"></i> Published: 13 March 2018 &nbsp;|&nbsp; <i class="fa fa-calendar-check-o"></i> Last updated: 14 March 2018 &nbsp;|&nbsp; <i class="fa fa-folder"></i> <a href="https://www.leowkahman.com/categories/software">Software</a></p><ul class="list-inline share" style="margin-top:15px;margin-left:0"><li class="facebook-share"><a target="_blank" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f13%2fusing-raspbian-on-2gb-micro-sd-card%2f"><i class="fa fa-facebook fa-lg"></i> Facebook</a></li><li class="twitter-share"><a target="_blank" href="https://twitter.com/share?url=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f13%2fusing-raspbian-on-2gb-micro-sd-card%2f&amp;text=Using%20Raspbian%20on%202GB%20Micro%20SD%20Card"><i class="fa fa-twitter fa-lg"></i> Twitter</a></li><li class="reddit-share"><a target="_blank" href="http://reddit.com/submit?url=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f13%2fusing-raspbian-on-2gb-micro-sd-card%2f&amp;title=Using%20Raspbian%20on%202GB%20Micro%20SD%20Card"><i class="fa fa-reddit fa-lg"></i> Reddit</a></li><li class="linkedin-share"><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.leowkahman.com%2f2018%2f03%2f13%2fusing-raspbian-on-2gb-micro-sd-card%2f"><i class="fa fa-linkedin fa-lg"></i> LinkedIn</a></li></ul><p><img src="/images/2018/03/nokia-2gb-micro-sd.jpg" alt="Nokia - 2GB micro SD"></p><p>Raspberry Pi 2 with Raspbian on a 2GB micro SD card? Feasible. If you need additional space for storing data, you can always attach thumb drives.</p><h2 id="motivation">Motivation</h2><p>I have been using NOOBS with Raspbian Jessie installed onto an 8GB micro SD card. While cleaning up my store room, I found a 2GB micro SD card that was bundled with a phone I once used, <a href="https://en.wikipedia.org/wiki/Nokia_N82">Nokia N82</a> which by the way, still works other than the battery. It is a Nokia after all. I benchmarked the 2GB card and discovered that it could sustain writes of 4.4MB/s. Speed-wise, this is comparable to my existing 8GB card. I decided to give the 2GB a chance to fame.</p><p>By freeing the use of my 8GB card, I can repurpose it for other future needs. USB thumb drive can be attached to get additional space for storing data. Fine by me given that I have more spare thumb drives than micro SD cards.</p><h2 id="requirements">Requirements</h2><p>Let me spell out my definition of minimum viable product on my Pi 2:</p><ol><li>Must have Kodi.</li><li>Must have Docker.</li><li>Must have GitLab Runner.</li><li>Must have pre-requisites for running .NET Core apps.</li></ol><p>What I explicitly do not need:</p><ol><li>Desktop environment.</li><li>Swap.</li></ol><h2 id="download-and-write-raspbian-image-onto-micro-sd">Download and write Raspbian image onto micro SD</h2><p><a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian Stretch Lite</a> is the image that I am using. The Lite variant does not come with Desktop. Whatever it does not have, if required, can be installed later.</p><p>Writing an image file to SD card using Ubuntu is convenient. Start the Disks Utility, select the SD card and restore the image onto it.</p><p><a href="/images/2018/03/ubuntu-restore-disk-image.png"><img src="/images/2018/03/ubuntu-restore-disk-image.png" alt="Ubuntu - Disk Utility - Restore Disk Image"></a></p><p>Then, boot up Pi with the micro SD attached. On first run, Raspbian will adjust the partition to fully utilise the available space.</p><p>If you do not know how to write this image to a SD card, please refer to <a href="https://www.raspberrypi.org/documentation/installation/installing-images/README.md">installation guide</a>.</p><h2 id="remove-swap">Remove swap</h2><p>This prolongs the life of the card and saves some space:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo chmod -x /etc/init.d/dphys-swapfile
sudo swapoff -a
sudo rm /var/swap
</code></pre></div><h2 id="installing-packages">Installing packages</h2><p>Before installing anything, update Raspbian:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt update
sudo apt upgrade -y
sudo apt autoremove
</code></pre></div><p>Then I installed and configured the following:</p><ol><li>Kodi: <code>sudo apt install kodi</code></li><li><a href="https://docs.docker.com/install/linux/docker-ce/debian/">Docker</a> (refer to Debian armhf).</li><li><a href="https://docs.gitlab.com/runner/install/linux-repository.html">GitLab Runner</a> (refer to Debian).</li><li><a href="https://www.leowkahman.com/2017/07/16/running-dotnet-core-on-raspberry-pi-raspbian/">.NET Core</a> (I blogged about this).</li></ol><p>Finally, clean apt cache:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt clean
</code></pre></div><h2 id="free-space-left">Free space left</h2><p>With all the above, here is a snapshot of my <code>df -h</code>:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Filesystem      Size  Used Avail Use% Mounted on
/dev/root       1.8G  1.5G  282M  84% /
devtmpfs        418M     0  418M   0% /dev
tmpfs           423M     0  423M   0% /dev/shm
tmpfs           423M   11M  412M   3% /run
tmpfs           5.0M  4.0K  5.0M   1% /run/lock
tmpfs           423M     0  423M   0% /sys/fs/cgroup
/dev/mmcblk0p1   41M   21M   21M  51% /boot
tmpfs            85M     0   85M   0% /run/user/1000
</code></pre></div><p>Roughly 280MB of free space left. Not too bad.</p><h2 id="attaching-a-usb-storage">Attaching a USB storage</h2><p>Docker will require Gigabytes of free space to store images. For this, I attached an 8GB thumb drive.</p><p>Insert an <a href="https://superuser.com/questions/643765/creating-ext4-partition-from-console">Ext4-formatted</a> USB thumb drive. Label it with a meaningful name. I labelled it <code>DOCKER</code>.</p><p>Then add a line into <code>/etc/fstab</code>:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">LABEL=DOCKER    /mnt/usb        ext4    defaults,noatime  0       1
</code></pre></div><p>Referring to <a href="https://docs.docker.com/engine/reference/commandline/dockerd/">Docker documentation</a>, to tell Docker to use a different root directory, create a file at <code>/etc/docker/daemon.json</code> with the following content:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;data-root&#34;</span>: <span style="color:#e6db74">&#34;/mnt/usb/docker&#34;</span>
}
</code></pre></div><p>Restart Docker to take effect:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo service docker restart
</code></pre></div><ul class="list-inline tags" style="margin-left:0"><li class="btn btn-primary"><a href="https://www.leowkahman.com/tags/raspberry-pi">Raspberry Pi</a></li></ul></div></div><div class="row"><div id="disqus_thread"></div><script>!function(){if("localhost"!=window.location.hostname){var e=document.createElement("script");e.type="text/javascript",e.async=!0;e.src="https://leowkahman.disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}}()</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div><div class="col-sm-4 blog-sidebar"><div class="sidebar-module"><script>!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cse.google.com/cse.js?cx=partner-pub-8585963436723502:5716828028";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><gcse:search></gcse:search></div><div class="sidebar-module"><h4>Recent Posts</h4><ul class="list-unstyled posts-recent"><li><a href="https://www.leowkahman.com/2020/02/01/speedtest-openwrt-with-flow-offloading/">Speedtest OpenWRT with flow offloading</a></li><li><a href="https://www.leowkahman.com/2019/02/06/ultrawide-monitor-on-linux/">Ultrawide monitor on Linux</a></li><li><a href="https://www.leowkahman.com/2019/02/03/switched-from-ubuntu-to-linux-mint/">Switched from Ubuntu to Linux Mint</a></li><li><a href="https://www.leowkahman.com/2018/08/11/reduce-internet-lag-on-openwrt/">Reduce internet lag on OpenWRT</a></li><li><a href="https://www.leowkahman.com/2018/05/29/workaround-to-wifi-issues-on-openwrt-lede/">Workaround to Wi-Fi issues on OpenWRT LEDE</a></li></ul></div><div class="sidebar-module"><h4>Categories</h4><ul class="list-unstyled posts-recent"><li><a href="https://www.leowkahman.com/categories/software/">software</a></li><li><a href="https://www.leowkahman.com/categories/web/">web</a></li><li><a href="https://www.leowkahman.com/categories/network/">network</a></li><li><a href="https://www.leowkahman.com/categories/hardware/">hardware</a></li><li><a href="https://www.leowkahman.com/categories/programming/">programming</a></li></ul></div></div></div></div><footer class="blog-footer"><div class="container"><div class="row"><div class="col-sm-8 col-xs-6"><ul class="list-inline links"><li><a href="/privacy-policy/">Privacy Policy</a></li><li><a href="https://status.leowkahman.com/">Uptime</a></li></ul></div><div class="col-sm-4 col-xs-6"><ul class="list-inline"><li><a target="_blank" href="/index.xml"><i class="fa fa-rss fa-lg"></i></a></li><li><a target="_blank" href="https://stackexchange.com/users/6729082/leow-kah-man"><i class="fa fa-stack-exchange fa-lg"></i></a></li><li><a target="_blank" href="https://github.com/kmleow"><i class="fa fa-github fa-lg"></i></a></li><li><a target="_blank" href="https://twitter.com/kmleow"><i class="fa fa-twitter fa-lg"></i></a></li><li><a target="_blank" href="https://www.linkedin.com/in/kmleow"><i class="fa fa-linkedin fa-lg"></i></a></li><li><a target="_blank" href="https://www.facebook.com/LeowKahMan"><i class="fa fa-facebook fa-lg"></i></a></li><li><a target="_blank" href="https://www.paypal.me/leowkahman/5usd"><i class="fa fa-paypal fa-lg"></i></a></li></ul></div></div></div><div class="container"><div class="col-sm-12 row"><p>Except as otherwise noted, the content of this page is licensed under the <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>,<br/>code samples are licensed under the <a href="https://tldrlegal.com/license/mit-license">MIT License</a>. Third-party product names and logos may be the trademarks of their respective owners.</p></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js" integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha256-Daf8GuI2eLKHJlOWLRR/zRy9Clqcj4TUSumbxYH9kGI=" crossorigin="anonymous"></script><script src="/js/custom.js?v=1.0.1"></script><script data-ad-client="ca-pub-8585963436723502" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>!function(e,a,t,n,g,c){e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,g=a.createElement(t),c=a.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(g,c)}(window,document,"script","ga"),ga("create","UA-61838818-1","auto"),ga("send","pageview"),ga("set","forceSSL",!0)</script></body></html>